/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a fast and simple pipeline test.

    Use as follows:
        nextflow run nf-core/coproid -profile test,<docker/singularity> --outdir <OUTDIR>

----------------------------------------------------------------------------------------
*/


params {
    config_profile_name        = 'Test profile'
    config_profile_description = 'Minimal test dataset to check pipeline function'

    // Limit resources so that this can run on GitHub Actions
    max_cpus   = 2
    max_memory = '6.GB'
    max_time   = '6.h'

    // Input data
    // TODO nf-core: Specify the paths to your test data on nf-core/test-datasets
    // TODO nf-core: Give any required params for the test so that command line flags are not needed
    input                    = "/mnt/archgen/users/vanos/coproid/assets/samplesheet.csv"
    genome_sheet             = "/mnt/archgen/users/vanos/coproid/assets/genomesheet.csv"
    sam2lca_db               = "/home/meriam_van_os/.sam2lca"
    kraken2_db               = "/mnt/archgen/users/vanos/tests/data/minikraken2_v2_8GB_201904_UPDATE"
    sp_sources               = params.modules_testdata_base_path + '/genomics/prokaryotes/metagenome/taxonomy/misc/sources_taxid.csv'
    sp_labels                = params.modules_testdata_base_path + '/genomics/prokaryotes/metagenome/taxonomy/misc/sources_labels.csv'
    taxa_sqlite              = "/home/meriam_van_os/.etetoolkit/taxa.sqlite"
    taxa_sqlite_traverse_pkl = "/home/meriam_van_os/.etetoolkit/taxa.sqlite.traverse.pkl"

    // outdir

    outdir = "test_results"
}

process {
    withName: 'SOURCEPREDICT' {
        ext.args = '-me MDS'
    }
}

// process {
//     withName: 'SAM2LCA_ANALYZE' {
//         ext.args = '-a test_coproid'
//    }
// }